(()=>{"use strict";const e=document.querySelector(".burger-menu span:first-child"),t=document.querySelector(".burger-menu span:last-child"),i=document.querySelector(".header__links"),n=document.querySelector(".burger-menu"),a=document.querySelectorAll(".navigation__link");function o(){e.classList.toggle("burger-menu__first-span"),t.classList.toggle("burger-menu__second-span"),i.classList.toggle("header__links_hide"),document.body.style.overflow=""}n.addEventListener("click",(function(){e.classList.toggle("burger-menu__first-span"),t.classList.toggle("burger-menu__second-span"),i.classList.toggle("header__links_hide"),"hidden"===document.body.style.overflow?document.body.style.overflow="":document.body.style.overflow="hidden"})),a.forEach((e=>{e.addEventListener("click",o)}));let l,s=document.querySelector(".pagination__stick_active .pagination__indicator"),c=document.querySelector(".pagination__stick_active"),d=!1,r=_(s,c);function _(e,t){let i,n=1,a=1;return i=setInterval((function o(){if(d);else{let l=t?t.nextElementSibling:null;if((a>=100||a<=0)&&(n*=-1,clearInterval(i),i=setInterval(o,1===n?100:5)),a<=0)if(h(),null!==l){t&&t.classList.remove("pagination__stick_active"),l.classList.add("pagination__stick_active");let e=l.querySelector(".pagination__indicator");clearInterval(i),_(e,l)}else{let e=document.querySelector(".pagination");t&&t.classList.remove("pagination__stick_active");let n=e?e.firstElementChild:null;if(n){n.classList.add("pagination__stick_active");let e=n.querySelector(".pagination__indicator");clearInterval(i),_(e,n)}}e&&(a+=n,e.style.width=`${a}%`)}}),150),l=i,{pauseAnimation:function(){d=!0},resumeAnimation:function(){d=!1}}}const u=document.querySelector(".carousel__slide_right"),m=document.querySelector(".carousel__slide_left"),v=document.querySelector(".carousel__container");let y,p,g,f=-348;function h(){f+=348,f>348&&(f=-348),v.style.left=-f+"px"}v&&(u.addEventListener("click",h),u.addEventListener("click",(function(){clearInterval(l);let e=document.querySelector(".pagination__stick_active"),t=document.querySelector(".pagination__stick_active .pagination__indicator"),i=1;!function n(){if(i+=-1,t.style.width=`${i}%`,i>0)requestAnimationFrame(n);else{let t=e.nextElementSibling;if(null!==t)e.classList.remove("pagination__stick_active"),t.classList.add("pagination__stick_active"),_(t.querySelector(".pagination__indicator"),t);else{let t=document.querySelector(".pagination");e.classList.remove("pagination__stick_active");let i=t.firstElementChild;i.classList.add("pagination__stick_active"),_(i.querySelector(".pagination__indicator"),i)}}}()})),m.addEventListener("click",(function(){f-=348,f<-348&&(f=348),v.style.left=-f+"px"})),m.addEventListener("click",(function(){clearInterval(l);let e=document.querySelector(".pagination__stick_active"),t=document.querySelector(".pagination__stick_active .pagination__indicator"),i=1;!function n(){if(i+=-1,t.style.width=`${i}%`,i>0)requestAnimationFrame(n);else{let t=e.previousElementSibling;if(null!==t)e.classList.remove("pagination__stick_active"),t.classList.add("pagination__stick_active"),_(t.querySelector(".pagination__indicator"),t);else{let t=document.querySelector(".pagination");e.classList.remove("pagination__stick_active");let i=t.lastElementChild;i.classList.add("pagination__stick_active");let n=document.querySelectorAll(".pagination__indicator");_(n[n.length-1],i)}}}()})));const k=document.querySelector(".carousel__container");let S,b,q;k&&(k.addEventListener("touchstart",(function(e){e.preventDefault(),r.pauseAnimation();const t=e.touches[0];y=t.clientX})),k.addEventListener("touchmove",(function(e){p=e.touches[0].clientX,g=y-p,console.log(g)})),k.addEventListener("touchend",(function(){g>20&&(f+=348),g<-20&&(f-=348),f>348&&(f=-348),f<-348&&(f=348),k.style.left=-f+"px",r.resumeAnimation()})),k.addEventListener("touchend",(function(){if(g>20){clearInterval(l);let e=document.querySelector(".pagination__stick_active"),t=document.querySelector(".pagination__stick_active .pagination__indicator"),i=1,n=-1;function a(){if(i+=n,t.style.width=`${i}%`,i>0)requestAnimationFrame(a);else{let t=e.nextElementSibling;if(null!==t)e.classList.remove("pagination__stick_active"),t.classList.add("pagination__stick_active"),_(t.querySelector(".pagination__indicator"),t);else{let t=document.querySelector(".pagination");e.classList.remove("pagination__stick_active");let i=t.firstElementChild;i.classList.add("pagination__stick_active"),_(i.querySelector(".pagination__indicator"),i)}}}a(),g=0}})),k.addEventListener("touchend",(function(){if(g<-20){clearInterval(l);let e=document.querySelector(".pagination__stick_active"),t=document.querySelector(".pagination__stick_active .pagination__indicator"),i=1,n=-1;function a(){if(i+=n,t.style.width=`${i}%`,i>0)requestAnimationFrame(a);else{let t=e.previousElementSibling;if(null!==t)e.classList.remove("pagination__stick_active"),t.classList.add("pagination__stick_active"),_(t.querySelector(".pagination__indicator"),t);else{let t=document.querySelector(".pagination");e.classList.remove("pagination__stick_active");let i=t.lastElementChild;i.classList.add("pagination__stick_active");let n=document.querySelectorAll(".pagination__indicator");_(n[n.length-1],i)}}}a(),g=0}})));let L=0;function w(){let e=document.querySelector(".modal__total-price"),t=(L+q).toFixed(2);e.textContent=`$${t}`}fetch("../json/data.json").then((e=>{if(!e.ok)throw new Error("Error");return e.json()})).then((e=>{S=e,function(e){let t,i;document.querySelectorAll(".menu__food-item").forEach((n=>{n.addEventListener("click",(function(a){let o=n.querySelector(".menu__item-name"),l=n.querySelector(".menu__item-img");t=o.textContent,i=l.src,function(e,t,i){const n=i.find((t=>t.name===e));b=n;let a=document.createElement("div");a.className="modal",a.innerHTML=`\n    <div class="modal__window">\n    <div class="modal__item-img-wrapper">\n        <img src="${t}" alt="img" class="modal__item-img">\n    </div>\n    <div class="modal___face-information">\n        <div class="modal__main-information">\n            <div class="modal__name-item">${n.name}</div>\n            <div class="modal__about-item">${n.description}</div>\n        </div>\n        <div class="modal__describe">\n            <div class="modal__size">\n                <div class="modal__size-name">Size</div>\n                <div class="modal__size-variables">\n                    <div class="modal__size-choise modal__select modal__size-choise_active">\n                        <div class="modal__size-variable-scale">S</div>\n                        <div class="modal__size-variable-number">${n.sizes.s.size}</div>\n                    </div>\n                    <div class="modal__size-choise modal__select">\n                        <div class="modal__size-variable-scale">M</div>\n                        <div class="modal__size-variable-number">${n.sizes.m.size}</div>\n                    </div>\n                    <div class="modal__size-choise modal__select">\n                        <div class="modal__size-variable-scale">L</div>\n                        <div class="modal__size-variable-number">${n.sizes.l.size}</div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal__additives">\n                <div class="modal__additives-name">Additives</div>\n                <div class="modal__additives-variables">\n                    <div class="modal__additives-choise modal__select">\n                        <div class="modal__additives-variable-scale">1</div>\n                        <div class="modal__additives-variable-number">Sugar</div>\n                    </div>\n                    <div class="modal__additives-choise modal__select">\n                        <div class="modal__additives-variable-scale">2</div>\n                        <div class="modal__additives-variable-number">Cinnamon</div>\n                    </div>\n                    <div class="modal__additives-choise modal__select">\n                        <div class="modal__additives-variable-scale">3</div>\n                        <div class="modal__additives-variable-number">Syrup</div>\n                    </div>\n                </div>\n            </div>\n            <div class="modal__total">\n                <div class="modal__total-name">Total:</div>\n                <div class="modal__total-price">$${n.price}</div>\n            </div>\n            <div class="modal__adition-information">\n                <svg class="modal__info-empty" width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">\n                    <g id="info-empty" clip-path="url(#clip0_268_12877)">\n                    <path id="Vector" d="M8 7.66663V11" stroke="#403F3D" stroke-linecap="round" stroke-linejoin="round"/>\n                    <path id="Vector_2" d="M8 5.00667L8.00667 4.99926" stroke="#403F3D" stroke-linecap="round" stroke-linejoin="round"/>\n                    <path id="Vector_3" d="M7.99967 14.6667C11.6816 14.6667 14.6663 11.6819 14.6663 8.00004C14.6663 4.31814 11.6816 1.33337 7.99967 1.33337C4.31778 1.33337 1.33301 4.31814 1.33301 8.00004C1.33301 11.6819 4.31778 14.6667 7.99967 14.6667Z" stroke="#403F3D" stroke-linecap="round" stroke-linejoin="round"/>\n                    </g>\n                    <defs>\n                    <clipPath id="clip0_268_12877">\n                    <rect width="16" height="16" fill="white"/>\n                    </clipPath>\n                    </defs>\n                </svg>\n                <div class="modal__adition-information-text">\n                    The cost is not final. Download our mobile app to see the final price and place your order. Earn loyalty points and enjoy your favorite coffee with up to 20% discount.\n                </div>\n            </div>\n            <div class="button_modal">\n                Close\n            </div>\n        </div>\n    </div>\n</div>\n`,document.body.appendChild(a),"hidden"===document.body.style.overflow?document.body.style.overflow="":document.body.style.overflow="hidden",function(){const e=document.querySelector(".modal"),t=document.querySelector(".button_modal");e.addEventListener("click",(function(t){t.currentTarget!==e||t.target.closest(".modal__window")||(e.remove(),"hidden"===document.body.style.overflow?document.body.style.overflow="":document.body.style.overflow="hidden")})),t.addEventListener("click",(function(){e.remove(),"hidden"===document.body.style.overflow?document.body.style.overflow="":document.body.style.overflow="hidden"}))}(),function(){const e=document.querySelector(".modal__size-variables"),t=document.querySelector(".modal__additives-variables");e.addEventListener("click",(function(t){const i=t.target.closest(".modal__size-choise");i&&(e.querySelectorAll(".modal__size-choise").forEach((e=>{e.classList.remove("modal__size-choise_active")})),i.classList.toggle("modal__size-choise_active"),function(e){let t=e.querySelector(".modal__size-variable-scale").textContent;q=parseFloat(b.price),console.log(b.price),"S"===t&&(q+=parseFloat(b.sizes.s["add-price"])),"M"===t&&(q+=parseFloat(b.sizes.m["add-price"])),"L"===t&&(q+=parseFloat(b.sizes.l["add-price"]))}(i),w())})),t.addEventListener("click",(function(e){const t=e.target.closest(".modal__additives-choise");var i;t&&(t.classList.toggle("modal__additives-choise_active"),(i=t).classList.contains("modal__additives-choise_active")?L+=.5:i.classList.contains("modal__additives-choise_active")||(L-=.5),w())}))}()}(t,i,e)}))}))}(S)})).catch((e=>{console.error(e.message)})),function(){let e=document.querySelectorAll(".menu__tag"),t=document.querySelector(".menu__coffee-category"),i=document.querySelector(".menu__tea-category"),n=document.querySelector(".menu__dessert-category"),a=document.querySelector(".menu__refresh-button"),o=document.querySelectorAll(".menu__food-item:nth-child(n+5):nth-child(-n+8)");t.style.display="flex",console.log(o),e.forEach((o=>{o.addEventListener("click",(function(){e.forEach((e=>{e.classList.remove("menu__tag_active")})),o.classList.toggle("menu__tag_active");let l=o.querySelector(".menu__tag-name").textContent;console.log(l),"Tea"===l&&(i.style.display="flex",t.style.display="none",n.style.display="none",a.style.display="none"),"Dessert"===l&&(i.style.display="none",t.style.display="none",n.style.display="flex",window.innerWidth<=768&&(a.style.display="block")),"Coffee"===l&&(i.style.display="none",t.style.display="flex",n.style.display="none",window.innerWidth<=768&&(a.style.display="block"))}))})),a.addEventListener("click",(function(){if("flex"===t.style.display)for(let e=0;e<o.length-4;e++)console.log(o[e]),o[e].style.display="block";if("flex"===n.style.display)for(let e=o.length-4;e<o.length;e++)o[e].style.display="block";a.style.display="none"}))}()})();